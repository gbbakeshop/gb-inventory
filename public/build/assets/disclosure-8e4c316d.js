import{r as n,m as v}from"./app-ded58547.js";import{S as B,D as g,y as E,k as H,o as D,u as T,X as x,I as L,e as K,b as C}from"./use-is-mounted-b1cee01c.js";import{r as U}from"./use-flags-775b83eb.js";import{s as F}from"./use-resolve-button-type-64f70eea.js";let $=n.createContext(null);$.displayName="OpenClosedContext";var S=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(S||{});function j(){return n.useContext($)}function q({value:e,children:t}){return v.createElement($.Provider,{value:e},t)}var M;let z=(M=v.startTransition)!=null?M:function(e){e()};var A=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(A||{}),Q=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(Q||{});let V={0:e=>({...e,disclosureState:T(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},O=n.createContext(null);O.displayName="DisclosureContext";function R(e){let t=n.useContext(O);if(t===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,R),u}return t}let h=n.createContext(null);h.displayName="DisclosureAPIContext";function N(e){let t=n.useContext(h);if(t===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,N),u}return t}let w=n.createContext(null);w.displayName="DisclosurePanelContext";function X(){return n.useContext(w)}function Y(e,t){return T(t.type,V,e,t)}let Z=n.Fragment;function G(e,t){let{defaultOpen:u=!1,...a}=e,P=n.useRef(null),l=E(t,H(c=>{P.current=c},e.as===void 0||e.as===n.Fragment)),o=n.useRef(null),m=n.useRef(null),s=n.useReducer(Y,{disclosureState:u?0:1,linkedPanel:!1,buttonRef:m,panelRef:o,buttonId:null,panelId:null}),[{disclosureState:i,buttonId:d},y]=s,p=D(c=>{y({type:1});let r=K(P);if(!r||!d)return;let f=(()=>c?c instanceof HTMLElement?c:c.current instanceof HTMLElement?c.current:r.getElementById(d):r.getElementById(d))();f==null||f.focus()}),I=n.useMemo(()=>({close:p}),[p]),b=n.useMemo(()=>({open:i===0,close:p}),[i,p]),k={ref:l};return v.createElement(O.Provider,{value:s},v.createElement(h.Provider,{value:I},v.createElement(q,{value:T(i,{0:S.Open,1:S.Closed})},x({ourProps:k,theirProps:a,slot:b,defaultTag:Z,name:"Disclosure"}))))}let J="button";function W(e,t){let u=L(),{id:a=`headlessui-disclosure-button-${u}`,...P}=e,[l,o]=R("Disclosure.Button"),m=X(),s=m===null?!1:m===l.panelId,i=n.useRef(null),d=E(i,t,s?null:l.buttonRef);n.useEffect(()=>{if(!s)return o({type:2,buttonId:a}),()=>{o({type:2,buttonId:null})}},[a,o,s]);let y=D(r=>{var f;if(s){if(l.disclosureState===1)return;switch(r.key){case C.Space:case C.Enter:r.preventDefault(),r.stopPropagation(),o({type:0}),(f=l.buttonRef.current)==null||f.focus();break}}else switch(r.key){case C.Space:case C.Enter:r.preventDefault(),r.stopPropagation(),o({type:0});break}}),p=D(r=>{switch(r.key){case C.Space:r.preventDefault();break}}),I=D(r=>{var f;U(r.currentTarget)||e.disabled||(s?(o({type:0}),(f=l.buttonRef.current)==null||f.focus()):o({type:0}))}),b=n.useMemo(()=>({open:l.disclosureState===0}),[l]),k=F(e,i),c=s?{ref:d,type:k,onKeyDown:y,onClick:I}:{ref:d,id:a,type:k,"aria-expanded":l.disclosureState===0,"aria-controls":l.linkedPanel?l.panelId:void 0,onKeyDown:y,onKeyUp:p,onClick:I};return x({ourProps:c,theirProps:P,slot:b,defaultTag:J,name:"Disclosure.Button"})}let _="div",ee=B.RenderStrategy|B.Static;function te(e,t){let u=L(),{id:a=`headlessui-disclosure-panel-${u}`,...P}=e,[l,o]=R("Disclosure.Panel"),{close:m}=N("Disclosure.Panel"),s=E(t,l.panelRef,I=>{z(()=>o({type:I?4:5}))});n.useEffect(()=>(o({type:3,panelId:a}),()=>{o({type:3,panelId:null})}),[a,o]);let i=j(),d=(()=>i!==null?(i&S.Open)===S.Open:l.disclosureState===0)(),y=n.useMemo(()=>({open:l.disclosureState===0,close:m}),[l,m]),p={ref:s,id:a};return v.createElement(w.Provider,{value:l.panelId},x({ourProps:p,theirProps:P,slot:y,defaultTag:_,features:ee,visible:d,name:"Disclosure.Panel"}))}let ne=g(G),le=g(W),re=g(te),ie=Object.assign(ne,{Button:le,Panel:re});export{j as C,q as c,S as d,ie as v};
