import{r as a,R as x,j as N,a as pe,F as ye}from"./app-44ab44c4.js";import{S as Q,D as A,y as z,T as ge,s as de,o as E,u as j,X as U,l as he}from"./use-flags-e6f7da6a.js";import{f as le,I as K,O as H,M as _,h as Se,T as Ee,o as G,r as fe,e as we,N as ne}from"./keyboard-3645b197.js";import{c as xe,d as W,C as ve}from"./open-closed-51f532d6.js";import{s as $e}from"./use-resolve-button-type-1a8188bb.js";import{h as Ie}from"./use-outside-click-bd39b60f.js";import{n as ae}from"./use-owner-05b90f87.js";import{a as Te,j as Ce,E as Fe,n as me,y as Re,s as L}from"./use-root-containers-6f3c736e.js";import{c as re,p as oe}from"./hidden-398850c9.js";import{t as Me}from"./transition-e90b95e6.js";var Oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Oe||{}),Ne=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ne||{});let ke={0:e=>{let t={...e,popoverState:j(e.popoverState,{0:1,1:0})};return t.popoverState===0&&(t.__demoMode=!1),t},1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},ue=a.createContext(null);ue.displayName="PopoverContext";function Z(e){let t=a.useContext(ue);if(t===null){let c=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,Z),c}return t}let se=a.createContext(null);se.displayName="PopoverAPIContext";function ie(e){let t=a.useContext(se);if(t===null){let c=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,ie),c}return t}let ce=a.createContext(null);ce.displayName="PopoverGroupContext";function be(){return a.useContext(ce)}let ee=a.createContext(null);ee.displayName="PopoverPanelContext";function Be(){return a.useContext(ee)}function De(e,t){return j(t.type,ke,e,t)}let _e="div";function Le(e,t){var c;let{__demoMode:d=!1,...h}=e,o=a.useRef(null),n=z(t,ge(s=>{o.current=s})),b=a.useRef([]),P=a.useReducer(De,{__demoMode:d,popoverState:d?0:1,buttons:b,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:a.createRef(),afterPanelSentinel:a.createRef()}),[{popoverState:S,button:p,buttonId:w,panel:l,panelId:k,beforePanelSentinel:T,afterPanelSentinel:g},u]=P,y=ae((c=o.current)!=null?c:p),I=a.useMemo(()=>{if(!p||!l)return!1;for(let J of document.querySelectorAll("body > *"))if(Number(J==null?void 0:J.contains(p))^Number(J==null?void 0:J.contains(l)))return!0;let s=le(),C=s.indexOf(p),X=(C+s.length-1)%s.length,q=(C+1)%s.length,Y=s[X],Pe=s[q];return!l.contains(Y)&&!l.contains(Pe)},[p,l]),F=de(w),R=de(k),B=a.useMemo(()=>({buttonId:F,panelId:R,close:()=>u({type:1})}),[F,R,u]),M=be(),i=M==null?void 0:M.registerPopover,$=E(()=>{var s;return(s=M==null?void 0:M.isFocusWithinPopoverGroup())!=null?s:(y==null?void 0:y.activeElement)&&((p==null?void 0:p.contains(y.activeElement))||(l==null?void 0:l.contains(y.activeElement)))});a.useEffect(()=>i==null?void 0:i(B),[i,B]);let[f,O]=Te(),r=Ce({mainTreeNodeRef:M==null?void 0:M.mainTreeNodeRef,portals:f,defaultContainers:[p,l]});Fe(y==null?void 0:y.defaultView,"focus",s=>{var C,X,q,Y;s.target!==window&&s.target instanceof HTMLElement&&S===0&&($()||p&&l&&(r.contains(s.target)||(X=(C=T.current)==null?void 0:C.contains)!=null&&X.call(C,s.target)||(Y=(q=g.current)==null?void 0:q.contains)!=null&&Y.call(q,s.target)||u({type:1})))},!0),Ie(r.resolveContainers,(s,C)=>{u({type:1}),Se(C,Ee.Loose)||(s.preventDefault(),p==null||p.focus())},S===0);let v=E(s=>{u({type:1});let C=(()=>s?s instanceof HTMLElement?s:"current"in s&&s.current instanceof HTMLElement?s.current:p:p)();C==null||C.focus()}),m=a.useMemo(()=>({close:v,isPortalled:I}),[v,I]),D=a.useMemo(()=>({open:S===0,close:v}),[S,v]),V={ref:n};return x.createElement(ee.Provider,{value:null},x.createElement(ue.Provider,{value:P},x.createElement(se.Provider,{value:m},x.createElement(xe,{value:j(S,{0:W.Open,1:W.Closed})},x.createElement(O,null,U({ourProps:V,theirProps:h,slot:D,defaultTag:_e,name:"Popover"}),x.createElement(r.MainTreeNode,null))))))}let Ge="button";function He(e,t){let c=K(),{id:d=`headlessui-popover-button-${c}`,...h}=e,[o,n]=Z("Popover.Button"),{isPortalled:b}=ie("Popover.Button"),P=a.useRef(null),S=`headlessui-focus-sentinel-${K()}`,p=be(),w=p==null?void 0:p.closeOthers,l=Be()!==null;a.useEffect(()=>{if(!l)return n({type:3,buttonId:d}),()=>{n({type:3,buttonId:null})}},[l,d,n]);let[k]=a.useState(()=>Symbol()),T=z(P,t,l?null:r=>{if(r)o.buttons.current.push(k);else{let v=o.buttons.current.indexOf(k);v!==-1&&o.buttons.current.splice(v,1)}o.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),r&&n({type:2,button:r})}),g=z(P,t),u=ae(P),y=E(r=>{var v,m,D;if(l){if(o.popoverState===1)return;switch(r.key){case G.Space:case G.Enter:r.preventDefault(),(m=(v=r.target).click)==null||m.call(v),n({type:1}),(D=o.button)==null||D.focus();break}}else switch(r.key){case G.Space:case G.Enter:r.preventDefault(),r.stopPropagation(),o.popoverState===1&&(w==null||w(o.buttonId)),n({type:0});break;case G.Escape:if(o.popoverState!==0)return w==null?void 0:w(o.buttonId);if(!P.current||u!=null&&u.activeElement&&!P.current.contains(u.activeElement))return;r.preventDefault(),r.stopPropagation(),n({type:1});break}}),I=E(r=>{l||r.key===G.Space&&r.preventDefault()}),F=E(r=>{var v,m;fe(r.currentTarget)||e.disabled||(l?(n({type:1}),(v=o.button)==null||v.focus()):(r.preventDefault(),r.stopPropagation(),o.popoverState===1&&(w==null||w(o.buttonId)),n({type:0}),(m=o.button)==null||m.focus()))}),R=E(r=>{r.preventDefault(),r.stopPropagation()}),B=o.popoverState===0,M=a.useMemo(()=>({open:B}),[B]),i=$e(e,P),$=l?{ref:g,type:i,onKeyDown:y,onClick:F}:{ref:T,id:o.buttonId,type:i,"aria-expanded":o.popoverState===0,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:y,onKeyUp:I,onClick:F,onMouseDown:R},f=me(),O=E(()=>{let r=o.panel;if(!r)return;function v(){j(f.current,{[L.Forwards]:()=>H(r,_.First),[L.Backwards]:()=>H(r,_.Last)})===ne.Error&&H(le().filter(m=>m.dataset.headlessuiFocusGuard!=="true"),j(f.current,{[L.Forwards]:_.Next,[L.Backwards]:_.Previous}),{relativeTo:o.button})}v()});return x.createElement(x.Fragment,null,U({ourProps:$,theirProps:h,slot:M,defaultTag:Ge,name:"Popover.Button"}),B&&!l&&b&&x.createElement(re,{id:S,features:oe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:O}))}let je="div",Ke=Q.RenderStrategy|Q.Static;function ze(e,t){let c=K(),{id:d=`headlessui-popover-overlay-${c}`,...h}=e,[{popoverState:o},n]=Z("Popover.Overlay"),b=z(t),P=ve(),S=(()=>P!==null?(P&W.Open)===W.Open:o===0)(),p=E(l=>{if(fe(l.currentTarget))return l.preventDefault();n({type:1})}),w=a.useMemo(()=>({open:o===0}),[o]);return U({ourProps:{ref:b,id:d,"aria-hidden":!0,onClick:p},theirProps:h,slot:w,defaultTag:je,features:Ke,visible:S,name:"Popover.Overlay"})}let We="div",qe=Q.RenderStrategy|Q.Static;function Ae(e,t){let c=K(),{id:d=`headlessui-popover-panel-${c}`,focus:h=!1,...o}=e,[n,b]=Z("Popover.Panel"),{close:P,isPortalled:S}=ie("Popover.Panel"),p=`headlessui-focus-sentinel-before-${K()}`,w=`headlessui-focus-sentinel-after-${K()}`,l=a.useRef(null),k=z(l,t,i=>{b({type:4,panel:i})}),T=ae(l);he(()=>(b({type:5,panelId:d}),()=>{b({type:5,panelId:null})}),[d,b]);let g=ve(),u=(()=>g!==null?(g&W.Open)===W.Open:n.popoverState===0)(),y=E(i=>{var $;switch(i.key){case G.Escape:if(n.popoverState!==0||!l.current||T!=null&&T.activeElement&&!l.current.contains(T.activeElement))return;i.preventDefault(),i.stopPropagation(),b({type:1}),($=n.button)==null||$.focus();break}});a.useEffect(()=>{var i;e.static||n.popoverState===1&&((i=e.unmount)==null||i)&&b({type:4,panel:null})},[n.popoverState,e.unmount,e.static,b]),a.useEffect(()=>{if(n.__demoMode||!h||n.popoverState!==0||!l.current)return;let i=T==null?void 0:T.activeElement;l.current.contains(i)||H(l.current,_.First)},[n.__demoMode,h,l,n.popoverState]);let I=a.useMemo(()=>({open:n.popoverState===0,close:P}),[n,P]),F={ref:k,id:d,onKeyDown:y,onBlur:h&&n.popoverState===0?i=>{var $,f,O,r,v;let m=i.relatedTarget;m&&l.current&&(($=l.current)!=null&&$.contains(m)||(b({type:1}),((O=(f=n.beforePanelSentinel.current)==null?void 0:f.contains)!=null&&O.call(f,m)||(v=(r=n.afterPanelSentinel.current)==null?void 0:r.contains)!=null&&v.call(r,m))&&m.focus({preventScroll:!0})))}:void 0,tabIndex:-1},R=me(),B=E(()=>{let i=l.current;if(!i)return;function $(){j(R.current,{[L.Forwards]:()=>{var f;H(i,_.First)===ne.Error&&((f=n.afterPanelSentinel.current)==null||f.focus())},[L.Backwards]:()=>{var f;(f=n.button)==null||f.focus({preventScroll:!0})}})}$()}),M=E(()=>{let i=l.current;if(!i)return;function $(){j(R.current,{[L.Forwards]:()=>{var f;if(!n.button)return;let O=le(),r=O.indexOf(n.button),v=O.slice(0,r+1),m=[...O.slice(r+1),...v];for(let D of m.slice())if(D.dataset.headlessuiFocusGuard==="true"||(f=n.panel)!=null&&f.contains(D)){let V=m.indexOf(D);V!==-1&&m.splice(V,1)}H(m,_.First,{sorted:!1})},[L.Backwards]:()=>{var f;H(i,_.Previous)===ne.Error&&((f=n.button)==null||f.focus())}})}$()});return x.createElement(ee.Provider,{value:d},u&&S&&x.createElement(re,{id:p,ref:n.beforePanelSentinel,features:oe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:B}),U({ourProps:F,theirProps:o,slot:I,defaultTag:We,features:qe,visible:u,name:"Popover.Panel"}),u&&S&&x.createElement(re,{id:w,ref:n.afterPanelSentinel,features:oe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:M}))}let Ue="div";function Ve(e,t){let c=a.useRef(null),d=z(c,t),[h,o]=a.useState([]),n=Re(),b=E(g=>{o(u=>{let y=u.indexOf(g);if(y!==-1){let I=u.slice();return I.splice(y,1),I}return u})}),P=E(g=>(o(u=>[...u,g]),()=>b(g))),S=E(()=>{var g;let u=we(c);if(!u)return!1;let y=u.activeElement;return(g=c.current)!=null&&g.contains(y)?!0:h.some(I=>{var F,R;return((F=u.getElementById(I.buttonId.current))==null?void 0:F.contains(y))||((R=u.getElementById(I.panelId.current))==null?void 0:R.contains(y))})}),p=E(g=>{for(let u of h)u.buttonId.current!==g&&u.close()}),w=a.useMemo(()=>({registerPopover:P,unregisterPopover:b,isFocusWithinPopoverGroup:S,closeOthers:p,mainTreeNodeRef:n.mainTreeNodeRef}),[P,b,S,p,n.mainTreeNodeRef]),l=a.useMemo(()=>({}),[]),k=e,T={ref:d};return x.createElement(ce.Provider,{value:w},U({ourProps:T,theirProps:k,slot:l,defaultTag:Ue,name:"Popover.Group"}),x.createElement(n.MainTreeNode,null))}let Xe=A(Le),Ye=A(He),Je=A(ze),Qe=A(Ae),Ze=A(Ve),te=Object.assign(Xe,{Button:Ye,Overlay:Je,Panel:Qe,Group:Ze});function et({title:e,titleId:t,...c},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d,"aria-labelledby":t},c),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const tt=a.forwardRef(et),nt=tt;function ft({data:e}){return N("div",{className:"w-full",children:N(te,{className:"relative",children:({open:t})=>{var c;return pe(ye,{children:[pe(te.Button,{className:`
                ${t?"text-gray-900":"text-gray-900/90"}
                group inline-flex items-center rounded-md  px-3  text-base font-medium hover:text-gray-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75`,children:[N("span",{className:"text-sm",children:(c=e[0])==null?void 0:c.group_name}),N(nt,{className:`${t?"text-red-500":"text-red-500/70"}
                  ml-2 h-5 w-5 transition duration-150 ease-in-out group-hover:text-red-500/80`,"aria-hidden":"true"})]}),N(Me,{as:a.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:N(te.Panel,{className:"absolute bg-white  z-50  w-[15vw] max-w-sm transform px-4 sm:px-0 lg:max-w-3xl",children:N("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 p-3 ring-black/5",children:N("ul",{className:"max-w-md space-y-1 text-gray-900 list-disc list-inside overflow-auto  ",children:e==null?void 0:e.map((d,h)=>{var o;return(o=d==null?void 0:d.bread)!=null&&o.name?N("li",{children:d.bread.name},h):N("li",{children:d.raw_materials.name},h)})})})})})]})}})})}export{ft as default};
