import{c as D,r as c,u as L,h as d,a as u,j as l,t as m}from"./app-56fb4b1a.js";async function T(e){return(await axios.post("/api/get_domination",e)).data}async function j(e){return(await axios.post("/api/create_domination",e)).data}function C({branch_id:e}){const o=D(),[y,a]=c.useState(!1),[f,i]=c.useState(!0),{date:p,meridiem:h}=L(t=>t.app),[g,n]=c.useState([{sign:"₱",bills:1e3,pcs:0,total:0},{sign:"₱",bills:500,pcs:0,total:0},{sign:"₱",bills:200,pcs:0,total:0},{sign:"₱",bills:100,pcs:0,total:0},{sign:"₱",bills:50,pcs:0,total:0},{sign:"₱",bills:20,pcs:0,total:0},{sign:"₱",bills:10,pcs:0,total:0},{sign:"₱",bills:5,pcs:0,total:0},{sign:"₱",bills:1,pcs:0,total:0},{sign:"¢",bills:0,pcs:0,total:0}]),x=[{sign:"₱",bills:1e3,pcs:0,total:0},{sign:"₱",bills:500,pcs:0,total:0},{sign:"₱",bills:200,pcs:0,total:0},{sign:"₱",bills:100,pcs:0,total:0},{sign:"₱",bills:50,pcs:0,total:0},{sign:"₱",bills:20,pcs:0,total:0},{sign:"₱",bills:10,pcs:0,total:0},{sign:"₱",bills:5,pcs:0,total:0},{sign:"₱",bills:1,pcs:0,total:0},{sign:"¢",bills:0,pcs:0,total:0}],k=(t,s)=>{n(b=>{const r=[...b];return r[t]={...r[t],pcs:s,total:s*r[t].bills},r})},w=g.reduce((t,s)=>t+s.total,0);function N(){return{status:"loading",message:"Loading..."}}c.useEffect(()=>{T({date:p,branch_id:e,meridiem:h}).then(t=>{d(p).format("L")<d().format("L")?(n(x),i(!0),a(!1)):t.status.length!==0?(i(!0),n(t.status),a(!1)):(n(x),i(!1),a(!1))}).catch(t=>{a(!1)})},[p,h]);function S(){a(!0),o(m(N())),j({branchid:e,domination:g,date:d().format("L"),meridiem:d().format("A")}).then(t=>{i(!0),a(!1),o(m(t))}).catch(t=>{i(!1),a(!1),o(m(res))})}const A=[...g].sort((t,s)=>s.bills-t.bills);return u("div",{className:" my-5",children:["TOTAL ACTUAL CASH ON HAND: ₱ ",w,l("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:l("tbody",{children:A.map((t,s)=>u("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[u("th",{scope:"row",className:"px-6 py-2 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:[t.sign," ",t.bills]}),l("td",{className:"px-6 py-2",children:f?t.pcs:l("input",{type:"number",onInput:b=>k(s,b.target.value),defaultValue:t.pcs,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-1.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"})}),l("td",{className:"px-6 py-2",children:t.total})]},s))})}),!f&&l("button",{disabled:y,onClick:S,class:"mt-5 w-full bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 border border-red-700 rounded",children:"Save"})]})}export{C as default};
