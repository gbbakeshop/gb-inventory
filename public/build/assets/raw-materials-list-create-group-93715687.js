import{r,u as B,c as D,j as e,a as l,F as G,t as i}from"./app-588386eb.js";import{D as I}from"./drawer-17261e78.js";import{L as _}from"./loading-component-904b414c.js";import{I as v}from"./input-4abf3aec.js";import{c as $}from"./raw-materials-group-service-5728d07e.js";import{P as k}from"./PencilSquareIcon-cc8dd3ca.js";import{C as F}from"./CheckIcon-908d3188.js";import{q as m}from"./combobox-1537a4f7.js";import{t as M}from"./transition-8b65e882.js";import"./dialog-7ef2a324.js";import"./use-flags-eb61f600.js";import"./keyboard-3c8f3a5d.js";import"./hidden-d32fdf9a.js";import"./use-root-containers-cd0d56fe.js";import"./use-outside-click-5529613d.js";import"./use-owner-d5cea512.js";import"./description-b5f4e5c1.js";import"./open-closed-2fb80018.js";import"./use-computed-621f1e3f.js";import"./use-resolve-button-type-be2dae2a.js";import"./use-tree-walker-20ac4b9a.js";import"./use-tracked-pointer-020ea004.js";import"./use-controllable-06aed29b.js";function se(){const[o,h]=r.useState([]),[c,d]=r.useState(""),[w,u]=r.useState(!1),{rawMaterials:g}=B(t=>t.controls),[N,y]=r.useState(""),n=D(),[S,p]=r.useState(!1),x=r.useRef();function C(t){t.preventDefault();const a=new FormData(x.current),f=o.map((s,L)=>({...s,grams:a.get(`grams_${L}`).replace(/[^0-9.]/g,"")}));n(i({status:"loading",message:"Loading..."})),o.length!==0?(u(!0),$(f,N).then(s=>{s.status=="success"?(p(!1),n(i(s.notify)),h([]),d("")):n(i(s.notify)),u(!1)}).catch(s=>{n(i({status:"error",message:"Loading..."})),u(!1)})):alert("Please Select Bread")}const b=c===""?g:g.filter(t=>t.name.toLowerCase().includes(c.toLowerCase()));return e("div",{className:"w-full",children:e(I,{title:"Create Bread Group",open:S,setOpen:p,button:e("span",{className:"hidden sm:block",children:l("button",{onClick:()=>p(!0),type:"button",className:"bg-white inline-flex items-center rounded-md  text-red-500 border-red-500 border px-3 py-2 text-sm font-semibold  shadow-sm ring-1 ring-inset ring-red-500 hover:bg-gray-100",children:[e(k,{className:"-ml-0.5 mr-1.5 h-6 w-6 text-red-500","aria-hidden":"true"}),"Create Group of Raw Materials"]})}),children:l("form",{ref:x,onSubmit:C,className:"flex flex-col h-full w-full",children:[l("div",{className:"flex-1",children:[e(v,{onChange:t=>y(t.target.value),value:"",name:"bread_name",title:"Group Name",placeholder:"Enter of Group",type:"text"}),e(m,{value:o,onChange:h,multiple:!0,children:e("div",{className:"relative mt-1",children:l("div",{className:"relative w-full cursor-default rounded-lg text-left  focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-red-300 sm:text-sm",children:[e(m.Input,{placeholder:"Search Raw Material",className:"w-full h-full border rounded-md border-red-500 py-4 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",onChange:t=>d(t.target.value)}),e(M,{as:r.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>d(""),children:e(m.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",children:b.length===0&&c!==""?e("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-700",children:"Nothing found."}):b.map(t=>e(m.Option,{className:({active:a})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${a?"bg-red-500 text-white":"text-gray-900"}`,value:t,children:({selected:a,active:f})=>l(G,{children:[e("span",{className:`block truncate ${a?"font-medium":"font-normal"}`,children:t.name}),a?e("span",{className:`absolute inset-y-0 left-0 flex items-center pl-3 ${f?"text-white":"text-red-500"}`,children:e(F,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},t.id))})}),e("div",{className:"",children:o.length>0&&o.map((t,a)=>e(v,{value:0,name:`grams_${a}`,title:t.name,placeholder:`Enter grams ${a+1}`,type:"text"},a))})]})})})]}),e("div",{className:"flex-none",children:w?e(_,{}):e("button",{type:"submit",className:"flex-none w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded bottom-0",children:"SUBMIT"})})]})})})}export{se as default};
