import{r as s}from"./app-2504df6d.js";import{h as E,T as p,e as w}from"./keyboard-057a4a8a.js";import{s as m}from"./use-flags-d2ac3b38.js";function d(n,a,r){let i=m(a);s.useEffect(()=>{function u(c){i.current(c)}return document.addEventListener(n,u,r),()=>document.removeEventListener(n,u,r)},[n,r])}function L(n,a,r){let i=m(a);s.useEffect(()=>{function u(c){i.current(c)}return window.addEventListener(n,u,r),()=>window.removeEventListener(n,u,r)},[n,r])}function P(n,a,r=!0){let i=s.useRef(!1);s.useEffect(()=>{requestAnimationFrame(()=>{i.current=r})},[r]);function u(t,l){if(!i.current||t.defaultPrevented)return;let e=l(t);if(e===null||!e.getRootNode().contains(e)||!e.isConnected)return;let v=function f(o){return typeof o=="function"?f(o()):Array.isArray(o)||o instanceof Set?o:[o]}(n);for(let f of v){if(f===null)continue;let o=f instanceof HTMLElement?f:f.current;if(o!=null&&o.contains(e)||t.composed&&t.composedPath().includes(o))return}return!E(e,p.Loose)&&e.tabIndex!==-1&&t.preventDefault(),a(t,e)}let c=s.useRef(null);d("pointerdown",t=>{var l,e;i.current&&(c.current=((e=(l=t.composedPath)==null?void 0:l.call(t))==null?void 0:e[0])||t.target)},!0),d("mousedown",t=>{var l,e;i.current&&(c.current=((e=(l=t.composedPath)==null?void 0:l.call(t))==null?void 0:e[0])||t.target)},!0),d("click",t=>{c.current&&(u(t,()=>c.current),c.current=null)},!0),d("touchend",t=>u(t,()=>t.target instanceof HTMLElement?t.target:null),!0),L("blur",t=>u(t,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function T(...n){return s.useMemo(()=>w(...n),[...n])}export{P as h,T as n,L as s};
